version: 1.0
runtime: nodejs22
build:
  commands:
    pre-build:
      - echo "Installing dependencies..."
      - npm install
    build:
      - echo "Building application with environment variables:"
      - echo "VITE_API_BASE_URL=$VITE_API_BASE_URL"
      - echo "NODE_ENV=$NODE_ENV"
      - npx vite build
      - echo "Application built successfully"
    post-build:
      - echo "Build phase completed"
  env:
    - name: NODE_ENV
      value: production
    - name: VITE_APP_ENV
      value: production
    - name: VITE_MOCK_MODE
      value: false
    - name: VITE_API_BASE_URL
      value: https://mnwpivaen5.us-east-1.awsapprunner.com
    - name: VITE_APP_TITLE
      value: Efficiency Tracker
    - name: VITE_DEBUG
      value: false
run:
  runtime-version: 22.16.0
  command: npm run serve
  network:
    port: 8080
    env: PORT
  env:
    - name: NODE_ENV
      value: production
    - name: VITE_APP_ENV
      value: production
    - name: VITE_MOCK_MODE
      value: false
    - name: VITE_API_BASE_URL
      value: https://mnwpivaen5.us-east-1.awsapprunner.com
    - name: VITE_APP_TITLE
      value: Efficiency Tracker
    - name: VITE_DEBUG
      value: false
